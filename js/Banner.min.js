(function (window) { var w = window.screen.availWidth; var l = $("#smh_banner ul li").length; var c = 0; var timer = null; var parm = {}; function init() { $(document).ready(function () { var countwidth = l * w; $("#smh_banner ul").css("width", countwidth + "px"); $("#smh_banner ul li img").css("width", w + "px"); var html = ""; for (var i = 1; i <= l; i++) { html += '<span class="' + (i == 1 ? "active" : "23") + '"></span>' } var dw = 15 * l - 5; var dw1 = (w - dw) / 2; $(".pagination").html(html).css("left", dw1 + "px") }) } init(); function star(number) { if (number != null) { var leftw = number * w + "px"; $("#smh_banner ul").animate({ left: "-" + leftw }); $(".pagination span:eq(" + number + ")").addClass("active").siblings().removeClass("active") } else { if (c < l - 1) { c++ } else { c = 0 } var left = $("#smh_banner ul").css("left").replace("-", "").replace("px", ""); var leftwidth = (l - 1) * w; if (left == leftwidth) { $("#smh_banner ul").animate({ left: "0px" }) } else { $("#smh_banner ul").animate({ left: "-=" + w + "px" }) } $(".pagination span:eq(" + c + ")").addClass("active").siblings().removeClass("active"); console.log(c) } } $(document).on("click", ".pagination span", function () { var ind = $(this).index(); c = ind; star(ind); window.clearInterval(timer); timer = setInterval(star, parm.time) }); window.onresize = function () { w = window.screen.availWidth; init(); $("#smh_banner ul").animate({ left: "0px" }); c = 0 }; function inits(obj) { parm = obj; timer = setInterval(star, obj.time) } window.inits = inits }(window));